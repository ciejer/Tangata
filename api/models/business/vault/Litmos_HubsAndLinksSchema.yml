version: 2

models:
  - name: h_achievement
    columns:
      - name: HK_H_ACHIEVEMENT
        tests:
          - not_null
          - unique
      - name: BK_H_ACHIEVEMENT
        tests:
          - not_null
          - unique         

  - name: h_compliance
    columns:
      - name: HK_H_COMPLIANCE
        tests:
          - not_null
          - unique                
      - name: BK_H_COMPLIANCE
        tests:
          - not_null
          - unique
    
  - name: h_course_team_enrolment
    columns:
      - name: HK_H_COURSE_TEAM_ENROLMENT
        tests:
          - not_null
          - unique
      - name: BK_H_COURSE_TEAM_ENROLMENT
        tests:
          - not_null
          - unique                

  - name: h_course_team_member_enrolment
    columns:
      - name: HK_H_COURSE_TEAM_MEMBER_ENROLMENT
        tests:
          - not_null
          - unique
      - name: BK_H_COURSE_TEAM_MEMBER_ENROLMENT
        tests:
          - not_null
          - unique  

  - name: h_course
    columns:
      - name: HK_H_COURSE
        tests:
          - not_null
          - unique                        
      - name: BK_H_COURSE
        tests:
          - not_null
          - unique

  - name: h_learning_module
    columns:
      - name: HK_H_LEARNING_MODULE
        tests:
          - not_null
          - unique    
      - name: BK_H_LEARNING_MODULE
        tests:
          - not_null
          - unique  

  - name: h_learning_path_course 
    columns:
      - name: HK_H_LEARNING_PATH_COURSE   
        tests:
          - not_null
          - unique
      - name: BK_H_LEARNING_PATH_COURSE
        tests:
          - not_null
          - unique         

  - name: h_learning_path_team_enrolment
    columns:
      - name: HK_H_LEARNING_PATH_TEAM_ENROLMENT
        tests:
          - not_null
          - unique                   
      - name: BK_H_LEARNING_PATH_TEAM_ENROLMENT
        tests:
          - not_null
          - unique      
              
  - name: h_learning_path_team_member_enrolment
    columns:
      - name: HK_H_LEARNING_PATH_TEAM_MEMBER_ENROLMENT
        tests:
          - not_null
          - unique                  
      - name: BK_H_LEARNING_PATH_TEAM_MEMBER_ENROLMENT
        tests:
          - not_null
          - unique              

  - name: h_learning_path
    columns:
      - name: HK_H_LEARNING_PATH
        tests:
          - not_null
          - unique
      - name: BK_H_LEARNING_PATH
        tests:
          - not_null
          - unique

  - name: h_module_result
    columns:
      - name: HK_H_MODULE_RESULT
        tests:
          - not_null
          - unique
      - name: BK_H_MODULE_RESULT
        tests:
          - not_null
          - unique

  - name: h_team_leader
    columns:
      - name: HK_H_TEAM_LEADER
        tests:
          - not_null
          - unique
      - name: BK_H_TEAM_LEADER
        tests:
           - not_null

  - name: h_team_member
    columns:
      - name: HK_H_TEAM_MEMBER
        tests:
          - not_null
          - unique
      - name: BK_H_TEAM_MEMBER
        tests:
          - not_null
          - unique
      - name: LOAD_DATETIME
        tests:                  
          - not_null        

  - name: h_team
    columns:
      - name: HK_H_TEAM
        tests:
          - not_null
          - unique
      - name: BK_H_TEAM
        tests:
          - not_null
          - unique

  - name: l_achievement_has_course_and_team_member
    columns:
      - name: HK_L_ACHIEVEMENT_HAS_COURSE_AND_TEAM_MEMBER
        tests:
          - not_null
          - unique
      - name: HK_H_ACHIEVEMENT
        tests:
          - not_null
          - relationships:
             to: ref ('h_achievement')
             field: HK_H_ACHIEVEMENT
      - name: HK_H_COURSE
        tests:
          - not_null
          - relationships:
             to: ref ('h_course')
             field: HK_H_COURSE
      - name: HK_H_TEAM_MEMBER
        tests:
          - not_null
          - relationships:
             to: ref ('h_team_member')
             field: HK_H_TEAM_MEMBER
      - name: RECORD_SOURCE
        tests:
          - not_null

  - name: l_achievement_has_course_and_team_member_syst
    tests:
      - unique:
          column_name: "concat(HK_L_ACHIEVEMENT_HAS_COURSE_AND_TEAM_MEMBER, LOAD_DATETIME)"   
    columns:
      - name: HK_L_ACHIEVEMENT_HAS_COURSE_AND_TEAM_MEMBER
        tests:
          - not_null 
      - name: IS_DELETED
        tests:
          - not_null
          - accepted_values: 
              values: ['YES', 'NO']             

  - name: l_course_has_learning_module 
    columns:
      - name: HK_L_COURSE_HAS_LEARNING_MODULE
        tests:
          - not_null
          - unique
      - name: HK_H_COURSE
        tests:
          - not_null
          - relationships:
             to: ref('h_course')
             field: HK_H_COURSE
      - name: HK_H_LEARNING_MODULE
        tests: 
          - not_null
          - relationships:
              to: ref('h_learning_module')
              field: HK_H_LEARNING_MODULE 
      - name: RECORD_SOURCE
        tests:
          - not_null
          - accepted_values:
              values: ['LITMOS.COURSE_MODULE','LITMOS.COURSE_MODULE_ILT','LITMOS.COURSE_MODULE_SESSION','LITMOS.USER_COURSE_MODULE_RESULT','LITMOS.COURSE_MODULE_REGISTRATION'] 
  - name: l_course_has_learning_module_syst
    tests:
      - unique:
          column_name: "concat(HK_L_COURSE_HAS_LEARNING_MODULE, LOAD_DATETIME)"   
    columns:
      - name: HK_L_COURSE_HAS_LEARNING_MODULE
        tests:
          - not_null 
      - name: IS_DELETED
        tests:
          - not_null
          - accepted_values: 
              values: ['YES', 'NO']  

  - name: l_enrolment_has_module_result
    columns:
      - name: HK_L_ENROLMENT_HAS_MODULE_RESULT
        tests:
          - not_null
          - unique
      - name: HK_H_COURSE_TEAM_MEMBER_ENROLMENT
        tests:
          - not_null
          - relationships:
              to: ref('h_course_team_member_enrolment')
              field: HK_H_COURSE_TEAM_MEMBER_ENROLMENT
      - name: HK_H_MODULE_RESULT
        tests:
          - not_null
          - relationships:
              to: ref('h_module_result') 
              field: HK_H_MODULE_RESULT       
  - name: l_enrolment_has_module_result_syst
    tests:
      - unique:
          column_name: "concat(HK_L_ENROLMENT_HAS_MODULE_RESULT, LOAD_DATETIME)"   
    columns:
      - name: HK_L_ENROLMENT_HAS_MODULE_RESULT
        tests:
          - not_null 
      - name: IS_DELETED
        tests:
          - not_null
          - accepted_values: 
              values: ['YES', 'NO']  

  - name: l_learning_path_contains_course
    columns:
      - name: HK_L_LEARNING_PATH_CONTAINS_COURSE 
        tests:
          - not_null
          - unique
      - name: HK_H_LEARNING_PATH
        tests:
          - not_null
          - relationships:
              to: ref('h_learning_path')
              field: HK_H_LEARNING_PATH
      - name: HK_H_COURSE
        tests:
          - not_null                
          - relationships:
              to: ref('h_course')
              field: HK_H_COURSE 
      - name: HK_H_LEARNING_PATH_COURSE
        tests:
          - not_null
          - relationships:
              to: ref('h_learning_path_course')
              field: HK_H_LEARNING_PATH_COURSE        
      - name: RECORD_SOURCE
        tests:
          - not_null  
          - accepted_values:
              values: ['LITMOS.LEARNING_PATH_COURSE'] 
  - name: l_learning_path_contains_course_syst
    tests:
      - unique:
          column_name: "concat(HK_L_LEARNING_PATH_CONTAINS_COURSE, LOAD_DATETIME)"   
    columns:
      - name: HK_L_LEARNING_PATH_CONTAINS_COURSE
        tests:
          - not_null 
      - name: IS_DELETED
        tests:
          - not_null
          - accepted_values: 
              values: ['YES', 'NO'] 

  - name: l_team_enrolled_on_course
    columns:
      - name: HK_L_TEAM_ENROLLED_ON_COURSE
        tests:
          - not_null
          - unique
      - name: HK_H_COURSE_TEAM_ENROLMENT
        tests:
          - not_null
          - relationships:
              to: ref('h_course_team_enrolment')
              field: HK_H_COURSE_TEAM_ENROLMENT             
      - name: HK_H_TEAM
        tests:
          - not_null
          - relationships:
              to: ref('h_team')
              field: HK_H_TEAM
      - name: HK_H_COURSE
        tests:
          - not_null
          - relationships:
              to: ref('h_course')
              field: HK_H_COURSE  
      - name: RECORD_SOURCE
        tests:
          - not_null
          - accepted_values:
              values: ['LITMOS.TEAM_COURSE']          
  - name: l_team_enrolled_on_course_syst
    tests:
      - unique:
          column_name: "concat(HK_L_TEAM_ENROLLED_ON_COURSE, LOAD_DATETIME)"   
    columns:
      - name: HK_L_TEAM_ENROLLED_ON_COURSE
        tests:
          - not_null 
      - name: IS_DELETED
        tests:
          - not_null
          - accepted_values: 
              values: ['YES', 'NO'] 

  - name: l_team_enrolled_on_learning_path
    columns:
      - name: HK_L_TEAM_ENROLLED_ON_LEARNING_PATH
        tests:
          - not_null
          - unique
      - name: HK_H_LEARNING_PATH_TEAM_ENROLMENT 
        tests:
        - not_null
      - name: HK_H_LEARNING_PATH  
        tests: 
          - not_null
          - relationships:
              to: ref('h_learning_path')
              field: HK_H_LEARNING_PATH
      - name: HK_H_TEAM
        tests:
          - not_null
          - relationships:
              to: ref('h_team') 
              field: HK_H_TEAM
      - name: RECORD_SOURCE
        tests:
          - not_null
          - accepted_values: 
              values: ['LITMOS.TEAM_LEARNING_PATH'] 
  - name: l_team_enrolled_on_learning_path_syst
    tests:
      - unique:
          column_name: "concat(HK_L_TEAM_ENROLLED_ON_LEARNING_PATH, LOAD_DATETIME)"   
    columns:
      - name: HK_L_TEAM_ENROLLED_ON_LEARNING_PATH
        tests:
          - not_null 
      - name: IS_DELETED
        tests:
          - not_null
          - accepted_values: 
              values: ['YES', 'NO']      

  - name: l_team_has_team_leader
    columns:
      - name: HK_L_TEAM_HAS_TEAM_LEADER
        tests:
          - not_null
          - unique
      - name: HK_H_TEAM
        tests:
          - not_null
          - relationships:
              to: ref('h_team')
              field: HK_H_TEAM
      - name: HK_H_TEAM_LEADER
        tests:
          - not_null
          - relationships:
               to: ref('h_team_leader')
               field: HK_H_TEAM_LEADER
      - name: RECORD_SOURCE
        tests:
          - not_null
          - accepted_values:
              values: ['LITMOS.TEAM_LEADER']   
  - name: l_team_has_team_leader_syst
    tests:
      - unique:
          column_name: "concat(HK_L_TEAM_HAS_TEAM_LEADER, LOAD_DATETIME)"   
    columns:
      - name: HK_L_TEAM_HAS_TEAM_LEADER
        tests:
          - not_null 
      - name: IS_DELETED
        tests:
          - not_null
          - accepted_values: 
              values: ['YES', 'NO']  

  - name: l_team_member_belongs_to_team
    columns:
      - name: HK_L_TEAM_MEMBER_BELONGS_TO_TEAM
        tests:
          - not_null
          - unique
      - name: HK_H_TEAM
        tests:
          - not_null
          - relationships:
              to: ref('h_team')
              field: HK_H_TEAM
      - name: HK_H_TEAM_MEMBER
        tests:
          - not_null
          - relationships:
              to: ref('h_team_member')
              field: HK_H_TEAM_MEMBER
      - name: RECORD_SOURCE
        tests:
          - not_null
  - name: l_team_member_belongs_to_team_syst
    tests:
      - unique:
          column_name: "concat(HK_L_TEAM_MEMBER_BELONGS_TO_TEAM, LOAD_DATETIME, EFFECTIVE_DATETIME)"  
    columns:
      - name: HK_L_TEAM_MEMBER_BELONGS_TO_TEAM
        tests:
          - not_null 
      - name: IS_DELETED
        tests:
          - not_null
          - accepted_values: 
              values: ['YES', 'NO']  

  - name: l_team_member_enrolled_on_course
    columns:
      - name: HK_L_TEAM_MEMBER_ENROLLED_ON_COURSE
        tests:
          - not_null
          - unique
      - name: HK_H_COURSE_TEAM_MEMBER_ENROLMENT
        tests:
          - not_null
          - relationships:
              to: ref('h_course_team_member_enrolment')
              field: HK_H_COURSE_TEAM_MEMBER_ENROLMENT
      - name: HK_H_TEAM_MEMBER
        tests:
          - not_null
          - relationships:
              to: ref('h_team_member')
              field: HK_H_TEAM_MEMBER
      - name: HK_H_COURSE
        tests:
          - not_null
          - relationships:
              to: ref('h_course')
              field: HK_H_COURSE    
  - name: l_team_member_enrolled_on_course_syst
    tests:
      - unique:
          column_name: "concat(HK_L_TEAM_MEMBER_ENROLLED_ON_COURSE, LOAD_DATETIME)"   
    columns:
      - name: HK_L_TEAM_MEMBER_ENROLLED_ON_COURSE
        tests:
          - not_null 
      - name: IS_DELETED
        tests:
          - not_null
          - accepted_values: 
              values: ['YES', 'NO']  

  - name: l_team_member_enrolled_on_learning_path 
    columns:
      - name: HK_L_TEAM_MEMBER_ENROLLED_ON_LEARNING_PATH 
        tests:
          - not_null
          - unique
      - name: HK_H_TEAM_MEMBER
        tests:
          - not_null
          - relationships:
              to: ref('h_team_member')
              field: HK_H_TEAM_MEMBER 
      - name: HK_H_LEARNING_PATH
        tests:                  
          - not_null
          - relationships:
              to: ref('h_learning_path')
              field: HK_H_LEARNING_PATH
      - name: HK_H_LEARNING_PATH_TEAM_MEMBER_ENROLMENT
        tests:
          - not_null
          - relationships:
              to: ref('h_learning_path_team_member_enrolment')
              field: HK_H_LEARNING_PATH_TEAM_MEMBER_ENROLMENT                 
  - name: l_team_member_enrolled_on_learning_path_syst
    tests:
      - unique:
          column_name: "concat(HK_L_TEAM_MEMBER_ENROLLED_ON_LEARNING_PATH, LOAD_DATETIME)"   
    columns:
      - name: HK_L_TEAM_MEMBER_ENROLLED_ON_LEARNING_PATH
        tests:
          - not_null 
      - name: IS_DELETED
        tests:
          - not_null
          - accepted_values: 
              values: ['YES', 'NO']     

  - name: l_team_member_has_achievement_indicating_compliance
    columns:
      - name: HK_L_TEAM_MEMBER_HAS_ACHIEVEMENT_INDICATING_COMPLIANCE
        tests:
          - not_null
          - unique
      - name: HK_H_TEAM_MEMBER
        tests:
          - not_null
          - relationships:
              to: ref('h_team_member')
              field: HK_H_TEAM_MEMBER
      - name: HK_H_ACHIEVEMENT
        tests:
          - not_null
          - relationships:
              to: ref('h_achievement')
              field: HK_H_ACHIEVEMENT
      - name: HK_H_COMPLIANCE
        tests:
          - not_null
          - relationships:
              to: ref('h_compliance')
              field: HK_H_COMPLIANCE
      - name: RECORD_SOURCE
        tests:
          - not_null
          - accepted_values:
              values: ['LITMOS.ACHIEVEMENT']  
  - name: l_team_member_has_achievement_indicating_compliance_syst
    tests:
      - unique:
          column_name: "concat(HK_L_TEAM_MEMBER_HAS_ACHIEVEMENT_INDICATING_COMPLIANCE, LOAD_DATETIME)"   
    columns:
      - name: HK_L_TEAM_MEMBER_HAS_ACHIEVEMENT_INDICATING_COMPLIANCE
        tests:
          - not_null 
      - name: IS_DELETED
        tests:
          - not_null
          - accepted_values: 
              values: ['YES', 'NO']     

  - name: l_team_member_has_module_result_from_learning_module
    columns:
      - name: HK_L_TEAM_MEMBER_HAS_MODULE_RESULT_FROM_LEARNING_MODULE
        tests:
          - not_null
      - name: HK_H_TEAM_MEMBER
        tests:
          - not_null
          - relationships:
              to: ref('h_team_member')
              field: HK_H_TEAM_MEMBER
      - name: HK_H_MODULE_RESULT
        tests:
          - not_null
          - relationships:
              to: ref('h_module_result')
              field: HK_H_MODULE_RESULT
      - name: HK_H_LEARNING_MODULE
        tests:
          - not_null
          - relationships:
              to: ref('h_learning_module')
              field: HK_H_LEARNING_MODULE
      - name: RECORD_SOURCE
        tests:
          - not_null
  - name: l_team_member_has_module_result_from_learning_module_syst
    tests:
      - unique:
          column_name: "concat(HK_L_TEAM_MEMBER_HAS_MODULE_RESULT_FROM_LEARNING_MODULE, LOAD_DATETIME)"   
    columns:
      - name: HK_L_TEAM_MEMBER_HAS_MODULE_RESULT_FROM_LEARNING_MODULE
        tests:
          - not_null 
      - name: IS_DELETED
        tests:
          - not_null
          - accepted_values: 
              values: ['YES', 'NO']             